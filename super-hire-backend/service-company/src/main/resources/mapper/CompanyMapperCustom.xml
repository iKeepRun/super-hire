<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zack.mapper.CompanyMapperCustom">

    <select id="queryCompanyList" resultType="com.zack.vo.CompanyInfoVO" parameterType="map">
        SELECT
        c.id as companyId,
        c.company_name as companyName,
        c.short_name as shortName,
        c.logo as logo,
        c.address as address,
        c.nature as nature,
        c.people_size as peopleSize,
        c.industry as industry,
        c.financ_stage as financStage,
        c.review_status as reviewStatus,
        c.commit_date as commitDate,
        u.real_name as commitUser

        FROM company c
        LEFT JOIN users u
        ON c.commit_user_id=u.id

        WHERE
        1 = 1
        <if test="paramMap.companyName != null and paramMap.companyName != ''">
            and c.company_name LIKE '%${paramMap.companyName}%'
        </if>
        <if test="paramMap.realName != null and paramMap.realName != ''">
            and u.real_name LIKE '%${paramMap.realName}%'
        </if>
        <if test="paramMap.reviewStatus != null and paramMap.reviewStatus >= 0">
            and c.review_status = #{paramMap.reviewStatus}
        </if>
        <if test="paramMap.commitDateStart != null">
            and c.commit_date &gt;= #{paramMap.commitDateStart}
        </if>
        <if test="paramMap.commitDateEnd != null">
            and c.commit_date &lt;= #{paramMap.commitDateEnd}
        </if>
        ORDER BY c.commit_date DESC


    </select>

</mapper>
